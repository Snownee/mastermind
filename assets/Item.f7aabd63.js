import{e as O,h as R,f as V,i as T,j as D,k as p,l as K,m as U,n as X,p as Y,c as q,q as n,b as $,s as B,g as d,v as x,o as C,x as A,w as u,y as F,d as v,T as H,z as G}from"./app.0d75901e.js";import{_ as J,a as Q}from"./Sidebar.de46cd22.js";import{_ as Z,a as ee}from"./WikiList.dcc3e79b.js";const te=O({setup(se){const h=R(),S=V(),g=T(()=>h.value.navbar!==!1&&S.value.navbar!==!1),y=D(),b=p(!1),l=e=>{b.value=typeof e=="boolean"?e:!b.value},i={x:0,y:0},_=e=>{i.x=e.changedTouches[0].clientX,i.y=e.changedTouches[0].clientY},I=e=>{const s=e.changedTouches[0].clientX-i.x,o=e.changedTouches[0].clientY-i.y;Math.abs(s)>Math.abs(o)&&Math.abs(s)>40&&(s>0&&i.x<=80?l(!0):l(!1))},f=p(!1),M=T(()=>[{"no-navbar":!g.value,"no-sidebar":!y.value.length,"sidebar-open":b.value},h.value.pageClass,{mobile:f.value}]);let w;const c=p(null),t=()=>{var o;const e=719;f.value=window.innerWidth<=e;const s=(o=x(c))==null?void 0:o.getElementsByClassName("list-container");if(!!s)for(let r=0;r<s.length;r++){const a=s[r],m=a.children;if(m.length===0)return;const E=a.clientWidth-20,L=m[0].clientWidth,W=Math.floor(E/L),j=(E-W*L)*.5+10;a.style.paddingLeft=j+"px"}};K(()=>{window.addEventListener("resize",t,!1),window.addEventListener("orientationchange",t,!1),t(),w=U().afterEach(()=>{l(!1)})}),X(()=>{t()}),Y(()=>{window.removeEventListener("resize",t,!1),window.removeEventListener("orientationchange",t,!1),w()});const k=G(),N=k.resolve,P=k.pending,z=(e,s)=>{f.value&&e.target&&e.target.id==="content-mask"&&(s==null||s.click(null))};return(e,s)=>(C(),q("div",{class:B(["theme-container",d(M)]),onTouchstart:_,onTouchend:I},[n(e.$slots,"navbar",{},()=>[d(g)?(C(),A(J,{key:0,onToggleSidebar:l},{before:u(()=>[n(e.$slots,"navbar-before")]),after:u(()=>[n(e.$slots,"navbar-after")]),_:3})):F("",!0)]),$("div",{class:"sidebar-mask",onClick:s[0]||(s[0]=o=>l(!1))}),n(e.$slots,"sidebar",{},()=>[v(Q,null,{top:u(()=>[n(e.$slots,"sidebar-top")]),bottom:u(()=>[n(e.$slots,"sidebar-bottom")]),_:3})]),n(e.$slots,"page",{},()=>[v(H,{name:"fade-slide-y",mode:"out-in",onBeforeEnter:d(N),onBeforeLeave:d(P)},{default:u(()=>{var o,r;return[$("main",{class:B(["page wiki",d(h).wikiClass])},[n(e.$slots,"top"),v(Z,{info:f.value?(o=c.value)==null?void 0:o.selectedInfo:(r=c.value)==null?void 0:r.currentInfo,onClick:s[1]||(s[1]=a=>z(a,c.value))},null,8,["info"]),v(ee,{ref:(a,m)=>{m.list=a,c.value=a}},null,512),n(e.$slots,"bottom")],2)]}),_:3},8,["onBeforeEnter","onBeforeLeave"])])],34))}});export{te as default};
