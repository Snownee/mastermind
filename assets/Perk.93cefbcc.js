import{e as x,h as V,f as D,i as S,j as K,k as w,l as U,m as X,n as Y,p as q,c as A,q as o,b as _,s as F,g,v as H,o as I,x as G,w as u,y as J,d as p,T as Q,z as Z}from"./app.0d75901e.js";import{_ as ee,a as te}from"./Sidebar.de46cd22.js";import{_ as se,a as ne}from"./WikiList.dcc3e79b.js";const oe={class:"page wiki wiki-perk"},ce=x({setup(ae){const E=V(),M=D(),L=S(()=>E.value.navbar!==!1&&M.value.navbar!==!1),P=K(),k=w(!1),i=e=>{k.value=typeof e=="boolean"?e:!k.value},l={x:0,y:0},R=e=>{l.x=e.changedTouches[0].clientX,l.y=e.changedTouches[0].clientY},z=e=>{const t=e.changedTouches[0].clientX-l.x,s=e.changedTouches[0].clientY-l.y;Math.abs(t)>Math.abs(s)&&Math.abs(t)>40&&(t>0&&l.x<=80?i(!0):i(!1))},m=w(!1),N=S(()=>[{"no-navbar":!L.value,"no-sidebar":!P.value.length,"sidebar-open":k.value},E.value.pageClass,{mobile:m.value}]),c=w(null),r=()=>{var y,B;const e=719;m.value=window.innerWidth<=e;const t=(B=(y=H(c))==null?void 0:y.firstElementChild)==null?void 0:B.firstElementChild;if(!t)return;const s=t.children;if(s.length===0)return;const h=t.clientWidth-20,n=s[0].clientWidth,d=Math.floor(h/n);let v=1,a=0;for(let b=0;b<s.length;b++){const f=s[b];if(f.style.marginLeft="",f.style.marginRight="",++a,b===s.length-1){let C=d-a;v%2==0&&(C-=.5),f.style.marginRight=n*C+"px"}v%2==0?(a===1&&(f.style.marginLeft=n*.5+"px"),a===d-1&&(f.style.marginRight=n*.5+"px",a=0,++v)):a===d&&(a=0,++v)}};let T;U(()=>{window.addEventListener("resize",r,!1),window.addEventListener("orientationchange",r,!1),r(),T=X().afterEach(()=>{i(!1)})}),Y(()=>{r()}),q(()=>{window.removeEventListener("resize",r,!1),window.removeEventListener("orientationchange",r,!1),T()});const $=Z(),O=$.resolve,W=$.pending,j=(e,t)=>{m.value&&e.target&&e.target.id==="content-mask"&&(t==null||t.click(null))};return(e,t)=>(I(),A("div",{class:F(["theme-container",g(N)]),onTouchstart:R,onTouchend:z},[o(e.$slots,"navbar",{},()=>[g(L)?(I(),G(ee,{key:0,onToggleSidebar:i},{before:u(()=>[o(e.$slots,"navbar-before")]),after:u(()=>[o(e.$slots,"navbar-after")]),_:3})):J("",!0)]),_("div",{class:"sidebar-mask",onClick:t[0]||(t[0]=s=>i(!1))}),o(e.$slots,"sidebar",{},()=>[p(te,null,{top:u(()=>[o(e.$slots,"sidebar-top")]),bottom:u(()=>[o(e.$slots,"sidebar-bottom")]),_:3})]),o(e.$slots,"page",{},()=>[p(Q,{name:"fade-slide-y",mode:"out-in",onBeforeEnter:g(O),onBeforeLeave:g(W)},{default:u(()=>{var s,h;return[_("main",oe,[o(e.$slots,"top"),p(se,{info:m.value?(s=c.value)==null?void 0:s.selectedInfo:(h=c.value)==null?void 0:h.currentInfo,onClick:t[1]||(t[1]=n=>j(n,c.value))},null,8,["info"]),p(ne,{ref:(n,d)=>{d.list=n,c.value=n}},null,512),o(e.$slots,"bottom")])]}),_:3},8,["onBeforeEnter","onBeforeLeave"])])],34))}});export{ce as default};
